<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>KanjiArt</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/matter-js/0.18.0/matter.min.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        @font-face {
            font-family: 'honyaji-reregular';
            src: url('honyaji-re-webfont.woff2') format('woff2'),
                url('honyaji-re-webfont.woff') format('woff');
            font-weight: normal;
            font-style: normal;
        }

        :root {
            --N5-color: #1d99f3;
            --N4-color: #1cdc9a;
            --N3-color: #c9ce3b;
            --N2-color: #f67400;
            --N1-color: #da4453;
            --none-color: #fafafa;
        }

        body,
        html {
            margin: 0;
            padding: 0;
            width: 100%;
            height: 100%;
            overflow: hidden;
            background-color: #222;
        }

        #rain-container {
            position: relative;
            width: 100%;
            height: 100%;
        }

        .kanji {
            position: absolute;
            font-size: 1.5rem;
            color: #fafafa;
            user-select: none;
            display: flex;
            align-items: center;
            justify-content: center;
            width: 20px;
            height: 20px;
            border-radius: 50%;
            font-family: 'honyaji-reregular', sans-serif;
        }

        #controls {
            position: absolute;
            top: 10px;
            left: 50%;
            transform: translateX(-50%);
            z-index: 1000;
        }

        #drop-rate-slider {
            width: 300px;
        }

        #legend {
            position: absolute;
            top: 10px;
            right: 10px;
            color: #fafafa;
            padding: 10px;
            border-radius: 5px;
            z-index: 1000;
            user-select: none;
        }

        .legend-item {
            display: flex;
            align-items: center;
            margin-bottom: 5px;
        }

        .legend-color {
            width: 20px;
            height: 20px;
            display: inline-block;
            margin-right: 10px;
        }

        #statistics {
            position: absolute;
            top: 10px;
            left: 10px;
            padding: 10px;
            border-radius: 5px;
            z-index: 1000;
            user-select: none;
            color: #fafafa;
        }

        #statistics p {
            margin: 5px 0;
        }

        #n5-percentage {
            color: var(--N5-color);
        }

        #n4-percentage {
            color: var(--N4-color);
        }

        #n3-percentage {
            color: var(--N3-color);
        }

        #n2-percentage {
            color: var(--N2-color);
        }

        #n1-percentage {
            color: var(--N1-color);
        }

        #none-percentage {
            color: var(--none-color);
        }
    </style>
</head>

<body>

    <div id="controls">
        <input type="range" id="drop-rate-slider" min="100" max="2000" value="500">
    </div>

    <div id="legend">
        <div class="legend-item"><span class="legend-color" style="background-color: var(--N5-color)"></span> JLPT N5
        </div>
        <div class="legend-item"><span class="legend-color" style="background-color: var(--N4-color)"></span> JLPT N4
        </div>
        <div class="legend-item"><span class="legend-color" style="background-color: var(--N3-color)"></span> JLPT N3
        </div>
        <div class="legend-item"><span class="legend-color" style="background-color: var(--N2-color)"></span> JLPT N2
        </div>
        <div class="legend-item"><span class="legend-color" style="background-color: var(--N1-color);"></span> JLPT N1
        </div>
        <div class="legend-item"><span class="legend-color" style="background-color: var(--none-color);"></span>?</div>
    </div>

    <div id="statistics">
        <p>Total Kanji: <span id="total-kanji">0</span></p>
        <p>JLPT N5: <span id="n5-percentage">0%</span></p>
        <p>JLPT N4: <span id="n4-percentage">0%</span></p>
        <p>JLPT N3: <span id="n3-percentage">0%</span></p>
        <p>JLPT N2: <span id="n2-percentage">0%</span></p>
        <p>JLPT N1: <span id="n1-percentage">0%</span></p>
        <p>None: <span id="none-percentage">0%</span></p>
    </div>




    <div id="rain-container"></div>
    <script>
        const kanji = ["日", "一", "二", "三", "十", "四", "五", "六", "七", "八", "九", "丸", "円", "〇", "人", "百", "千", "万", "口", "田", "目", "川", "月", "明", "曜", "火", "水", "木", "金", "土", "本", "東", "大", "小", "中", "生", "山", "出", "入", "下", "上", "止", "正", "足", "定", "手", "用", "無", "不", "回", "言", "舌", "話", "活", "行", "心", "耳", "又", "取", "身", "休", "体", "信", "付", "受", "以", "立", "部", "倍", "成", "代", "王", "玉", "宝", "国", "白", "皇", "全", "書", "事", "自", "貝", "見", "力", "刀", "切", "刃", "分", "公", "別", "長", "男", "女", "子", "好", "安", "案", "字", "学", "父", "文", "交", "校", "母", "毎", "海", "者", "工", "式", "弐", "武", "糸", "前", "後", "午", "牛", "年", "件", "条", "化", "花", "北", "比", "背", "車", "気", "汽", "性", "畑", "青", "麦", "素", "毒", "先", "洗", "元", "光", "去", "法", "走", "当", "思", "早", "草", "朝", "潮", "形", "発", "廃", "音", "意", "作", "昨", "雨", "電", "頁", "首", "道", "通", "乳", "豆", "頭", "予", "矛", "預", "句", "旬", "的", "約", "勿", "物", "方", "防", "面", "画", "両", "岡", "満", "顔", "産", "同", "向", "尚", "高", "圧", "地", "池", "他", "集", "進", "込", "斤", "近", "辺", "最", "皿", "血", "温", "湿", "爪", "瓜", "巾", "布", "市", "吊", "泉", "原", "源", "線", "綿", "絹", "錦", "願", "内", "肉", "猪", "豚", "家", "吾", "我", "語", "伝", "転", "芸", "会", "合", "今", "令", "念", "印", "命", "亡", "米", "粒", "和", "私", "広", "細", "林", "森", "松", "竹", "都", "京", "政", "府", "戸", "所", "至", "致", "屋", "室", "古", "居", "局", "故", "胡", "湖", "固", "箇", "個", "且", "組", "夕", "外", "多", "汐", "名", "天", "未", "末", "味", "来", "新", "親", "欠", "次", "席", "度", "渡", "限", "銀", "根", "良", "郎", "廊", "食", "飲", "官", "館", "宿", "犬", "太", "器", "凶", "区", "図", "番", "号", "品", "楽", "薬", "周", "週", "調", "束", "整", "数", "類", "示", "禁", "礼", "社", "申", "神", "員", "質", "党", "堂", "常", "賞", "償", "掌", "覚", "悟", "感", "央", "映", "決", "快", "英", "並", "平", "半", "馬", "尺", "尽", "駅", "鳥", "島", "角", "虫", "触", "解", "独", "店", "占", "点", "士", "商", "買", "売", "続", "読", "共", "供", "洪", "昔", "冬", "寒", "春", "夏", "秋", "主", "住", "駐", "注", "志", "誌", "仕", "任", "支", "反", "坂", "阪", "飯", "返", "雑", "乱", "寸", "寺", "時", "持", "特", "待", "得", "侍", "詩", "即", "節", "筋", "等", "均", "季", "委", "穴", "空", "友", "有", "左", "右", "石", "若", "苦", "在", "存", "干", "刊", "汗", "竿", "利", "害", "益", "溢", "割", "憲", "羽", "翌", "習", "弓", "引", "強", "弱", "風", "己", "記", "紀", "改", "起", "姓", "由", "油", "井", "囲", "丼", "丁", "寧", "町", "灯", "庁", "貯", "易", "賜", "場", "湯", "門", "間", "閉", "開", "関", "問", "聞", "訪", "送", "券", "包", "巻", "圏", "勝", "戦", "単", "簡", "過", "骨", "昼", "夜", "液", "戒", "幾", "畿", "磯", "機", "械", "飛", "氏", "民", "紙", "低", "抵", "邸", "底", "巨", "臣", "基", "期", "毛", "尾", "育", "羊", "洋", "魚", "鮮", "蘇", "詳", "祥", "美", "業", "実", "養", "様", "企", "曲", "典", "興", "輿", "竜", "滝", "籠", "農", "濃", "豊", "吉", "詰", "結", "投", "役", "没", "設", "段", "殺", "刹", "刈", "絵", "給", "巴", "色", "声", "眉", "里", "理", "埋", "野", "黒", "墨", "童", "量", "重", "動", "働", "労", "協", "種", "亜", "悪", "要", "価", "必", "証", "歪", "否", "処", "拠", "計", "針", "総", "窓", "矢", "知", "医", "短", "失", "鉄", "夫", "朱", "株", "族", "旅", "遊", "施", "旋", "旗", "放", "激", "牧", "位", "泣", "笑", "専", "恵", "連", "軍", "運", "蓮", "隊", "呈", "程", "聖", "紐", "革", "靴", "鞄", "皮", "破", "彼", "波", "果", "課", "巣", "菓", "茶", "世", "葉", "棄", "緑", "録", "剥", "縁", "介", "界", "浮", "将", "奨", "状", "病", "症", "痛", "憶", "臆", "億", "視", "規", "則", "側", "測", "考", "老", "厚", "教", "完", "院", "奈", "宗", "祭", "際", "察", "祈", "祖", "助", "仲", "忠", "沖", "保", "呆", "守", "団", "対", "村", "才", "財", "材", "沈", "枕", "丈", "杖", "偉", "緯", "衛", "韓", "違", "抱", "砲", "泡", "丹", "舟", "船", "舶", "般", "搬", "盤", "歯", "冷", "齢", "少", "砂", "歩", "渉", "省", "相", "想", "称", "弥", "互", "務", "柔", "軟", "軌", "軒", "軸", "較", "庫", "蔵", "倉", "創", "告", "造", "衣", "依", "袋", "褒", "裏", "表", "現", "著", "制", "製", "初", "裸", "難", "准", "準", "備", "死", "葬", "列", "烈", "裂", "例", "刑", "型", "研", "厄", "危", "範", "怨", "宛", "碗", "腕", "却", "脚", "犯", "狂", "獄", "非", "排", "俳", "罪", "罰", "伴", "判", "評", "批", "師", "座", "坐", "卒", "率", "傘", "笠", "星", "汁", "斗", "料", "科", "然", "燃", "黙", "獣", "猟", "漁", "狩", "猛", "煙", "焼", "暁", "旧", "児", "赤", "変", "蛮", "恋", "愛", "憂", "優", "栗", "票", "標", "漂", "遷", "各", "客", "路", "格", "絡", "略", "閣", "落", "南", "西", "酒", "洒", "配", "酸", "猶", "尊", "遵", "導", "敬", "警", "驚", "散", "敢", "厳", "仏", "払", "拡", "可", "何", "苛", "荷", "河", "阿", "司", "伺", "詞", "飼", "冊", "嗣", "覗", "歌", "唄", "負", "敗", "責", "積", "債", "漬", "紡", "績", "具", "真", "直", "植", "殖", "値", "置", "県", "州", "洲", "接", "継", "断", "応", "床", "麻", "歴", "暦", "臨", "園", "遠", "与", "写", "移", "卸", "御", "複", "腹", "復", "往", "柱", "征", "従", "徒", "縦", "延", "伸", "紳", "縮", "誕", "廷", "庭", "艇", "展", "殿", "異", "翼", "累", "塁", "吏", "使", "史", "更", "便", "硬", "能", "態", "熊", "罷", "羅", "雲", "曇", "雪", "雷", "零", "震", "振", "久", "賑", "丘", "兵", "岳", "浜", "舎", "再", "虎", "寅", "演", "黄", "横", "構", "講", "購", "溝", "仮", "片", "版", "板", "販", "義", "議", "儀", "犠", "牲", "旨", "指", "揮", "輝", "刺", "策", "差", "着", "看", "到", "倒", "論", "倫", "輪", "輸", "諭", "愉", "癒", "台", "治", "冶", "療", "僚", "瞭", "寮", "始", "終", "了", "承", "蒸", "舞", "隣", "瞬", "夢", "枝", "技", "伎", "岐", "阜", "急", "争", "情", "清", "晴", "精", "請", "静", "浄", "算", "答", "符", "博", "縛", "簿", "薄", "采", "菜", "採", "彩", "杉", "街", "術", "述", "余", "除", "徐", "叙", "斜", "途", "塗", "漆", "仙", "垂", "乗", "兼", "剰", "睡", "眠", "郵", "錘", "華", "侵", "浸", "寝", "掃", "婦", "帰", "戻", "涙", "射", "謝", "討", "訂", "打", "撃", "拭", "試", "検", "験", "険", "倹", "剣", "谷", "欲", "浴", "容", "溶", "俗", "裕", "寛", "甘", "紺", "紅", "攻", "功", "巧", "朽", "枯", "汚", "弁", "昇", "登", "澄", "充", "銃", "統", "流", "硫", "盲", "忘", "忙", "荒", "慌", "望", "希", "稀", "括", "拘", "拾", "捨", "孤", "弧", "弾", "禅", "系", "係", "孫", "懸", "偏", "遍", "編", "篇", "普", "譜", "職", "織", "識", "殉", "退", "眼", "智", "仁", "忍", "認", "求", "救", "球", "屯", "純", "鈍", "召", "招", "沼", "紹", "詔", "勅", "昭", "照", "超", "越", "趣", "赴", "訃", "朴", "掛", "摘", "滴", "嫡", "適", "敵", "授", "援", "媛", "緩", "暖", "観", "勧", "権", "歓", "鶴", "確", "慢", "漫", "抑", "仰", "迎", "柳", "卵", "疎", "速", "遅", "辻", "迅", "加", "減", "滅", "威", "嚇", "或", "惑", "域", "収", "納", "献", "貢", "貪", "貰", "貧", "賃", "貸", "貨", "資", "賛", "替", "潜", "貿", "留", "溜", "賀", "架", "染", "梨", "傑", "貴", "潰", "遺", "遣", "追", "迫", "泊", "伯", "拍", "弔", "沸", "煮", "費", "弟", "第", "剃", "兄", "只", "税", "鋭", "説", "脱", "閲", "祝", "況", "悦", "克", "競", "姉", "妹", "珠", "殊", "序", "秩", "迭", "喜", "善", "繕", "憾", "恨", "惜", "措", "借", "錯", "曽", "増", "層", "憎", "僧", "贈", "賄", "賂", "賦", "賊", "帯", "滞", "渋", "摂", "為", "偽", "参", "惨", "呂", "侶", "宮", "営", "蛍", "栄", "誉", "挙", "拳", "桜", "妥", "咲", "茎", "径", "怪", "軽", "経", "斉", "斎", "済", "剤", "剖", "陪", "培", "賠", "貼", "粘", "衡", "換", "喚", "絶", "免", "逸", "勉", "晩", "許", "象", "像", "彫", "景", "影", "撮", "就", "涼", "鯨", "隔", "融", "肖", "消", "硝", "梢", "削", "宵", "宴", "郷", "響", "城", "誠", "盛", "旺", "盆", "蓋", "盗", "盟", "塩", "傷", "揚", "暢", "陽", "陰", "隠", "穏", "穂", "稲", "愁", "裁", "載", "栽", "赦", "跡", "踪", "痕", "蹴", "踊", "踏", "躍", "濯", "奇", "寄", "騎", "椅", "崎", "埼", "岬", "模", "膜", "漠", "幕", "墓", "募", "暮", "添", "恭", "暴", "爆", "沿", "礎", "疑", "凝", "擬", "倣", "似", "俺", "庵", "僕", "撲", "叩", "伐", "閥", "闘", "闇", "閑", "脈", "派", "缶", "揺", "謡", "遥", "陶", "陳", "陣", "陥", "隆", "降", "峰", "縫", "蜂", "蜜", "密", "秘", "欧", "枢", "殴", "駆", "馳", "騒", "旭", "旦", "但", "担", "亘", "恒", "垣", "宣", "喧", "嘩", "唾", "壷", "坪", "畔", "衆", "伊", "君", "群", "郡", "那", "邦", "郊", "効", "絞", "搾", "紋", "菊", "帝", "締", "諦", "享", "郭", "亭", "停", "昆", "混", "皆", "階", "陛", "陸", "睦", "勢", "熱", "熟", "塾", "陵", "菱", "俊", "唆", "筈", "暑", "署", "賭", "諸", "儲", "緒", "翁", "婆", "姿", "恣", "妄", "萎", "妻", "凄", "章", "彰", "障", "辛", "辣", "辞", "壁", "璧", "癖", "避", "幸", "服", "報", "執", "摯", "達", "朗", "浪", "娯", "誤", "富", "副", "幅", "福", "祉", "禍", "渦", "鍋", "蘭", "欄", "潤", "淵", "滑", "稽", "肩", "脅", "肯", "双", "江", "湾", "港", "選", "択", "沢", "訳", "釈", "敷", "傲", "贅", "審", "藩", "翻", "翔", "査", "租", "粗", "阻", "狙", "宜", "畳", "甲", "乙", "柄", "押", "抽", "捜", "届", "宙", "笛", "袖", "襟", "衿", "裾", "据", "握", "揃", "撫", "託", "宅", "詫", "宇", "芋", "寿", "鋳", "銘", "鏡", "境", "環", "還", "盾", "循", "巡", "這", "逓", "息", "憩", "鼻", "孔", "臭", "嗅", "奥", "尖", "突", "窒", "窃", "衝", "契", "喫", "潔", "侮", "梅", "悔", "敏", "繁", "繋", "茂", "橋", "矯", "稿", "縞", "箋", "残", "銭", "践", "浅", "洩", "壮", "荘", "装", "冥", "暗", "韻", "損", "捕", "挿", "補", "浦", "哺", "舗", "掴", "捉", "促", "筆", "津", "律", "逮", "建", "健", "康", "庸", "粛", "繍", "唐", "糖", "粧", "糧", "粉", "紛", "糾", "粋", "砕", "枠", "酔", "醒", "酬", "酷", "凡", "凧", "帆", "汎", "恐", "怖", "築", "尋", "訊", "諮", "抗", "航", "坑", "拝", "耕", "耗", "崇", "灰", "炭", "岸", "岩", "崩", "嵐", "崖", "催", "焦", "礁", "奮", "奪", "隻", "獲", "穫", "護", "譲", "嬢", "醸", "壌", "壊", "懐", "徳", "聴", "恥", "羞", "爵", "侯", "喉", "候", "修", "悠", "是", "提", "堤", "題", "匙", "冒", "唱", "晶", "帽", "棟", "凍", "氷", "永", "泳", "詠", "札", "枚", "杯", "析", "折", "挫", "捻", "誓", "逝", "哲", "暫", "斥", "訴", "訟", "究", "窮", "極", "函", "探", "深", "慄", "惧", "慎", "鎮", "填", "婚", "囚", "困", "梱", "因", "姻", "咽", "恩", "菌", "漢", "嘆", "勤", "謹", "僅", "索", "牽", "牢", "啓", "庶", "遮", "燕", "雀", "劣", "抄", "秒", "妙", "沙", "汰", "煎", "炒", "炊", "焚", "薪", "乃", "之", "此", "其", "乏", "芝", "及", "扱", "級", "吸", "吹", "呼", "吐", "叶", "叱", "叫", "吟", "含", "琴", "迷", "謎", "逆", "遡", "塑", "勲", "薫", "芳", "香", "秀", "誘", "拐", "透", "携", "雄", "雌", "些", "柴", "紫", "髪", "髭", "詐", "欺", "棋", "碁", "甚", "勘", "堪", "匹", "匠", "匿", "諾", "乞", "乾", "幹", "操", "燥", "繰", "藻", "噴", "墳", "憤", "牙", "芽", "雅", "邪", "既", "概", "慨", "苗", "描", "猫", "兆", "眺", "逃", "桃", "跳", "挑", "拙", "屈", "掘", "堀", "封", "筒", "管", "棺", "轄", "洞", "窟", "淫", "妊", "娠", "唇", "辱", "襲", "伏", "吠", "噛", "班", "斑", "輩", "悲", "忽", "惚", "猿", "哀", "衰", "衷", "喪", "忌", "卓", "悼", "貞", "偵", "覇", "覆", "履", "属", "嘱", "偶", "隅", "隙", "遇", "愚", "曹", "遭", "槽", "妨", "坊", "傍", "於", "房", "扉", "雇", "顧", "屑", "糞", "尿", "泌", "尻", "炉", "窯", "釜", "爺", "窪", "佳", "涯", "暇", "霞", "雰", "霧", "露", "霜", "箱", "籍", "貫", "慣", "頂", "戴", "項", "頃", "傾", "頑", "頒", "頓", "顕", "領", "頻", "順", "馴", "訓", "須", "額", "頼", "瀬", "峡", "狭", "挟", "頬", "顎", "煩", "患", "疾", "痴", "疫", "痢", "瘍", "癌", "痩", "疲", "被", "披", "抜", "控", "扶", "抹", "拓", "拷", "楼", "壇", "塔", "搭", "寡", "飾", "飽", "餓", "飢", "机", "冗", "冠", "離", "胸", "悩", "脳", "臓", "胃", "炎", "談", "淡", "災", "肝", "肺", "胆", "腺", "胞", "腸", "胎", "腰", "肘", "膝", "股", "肢", "脇", "脂", "肪", "肌", "膚", "慮", "虐", "劇", "虚", "虜", "勇", "繊", "緻", "嘘", "噂", "樽", "距", "拒", "嬉", "鼓", "樹", "膨", "脹", "張", "帳", "腫", "肥", "把", "誇", "覧", "監", "鑑", "艦", "濫", "藍", "賢", "腎", "堅", "緊", "勃", "励", "栃", "茨", "羨", "歳", "戚", "叔", "淑", "寂", "督", "奴", "努", "怒", "隷", "款", "殻", "穀", "臼", "廉", "鎌", "嫌", "謙", "遜", "亀", "練", "錬", "鍛", "鉱", "銅", "鉛", "銑", "鋼", "綱", "網", "縄", "鉢", "鎖", "絆", "鍵", "錠", "鈴", "鐘", "瞳", "憧", "卑", "碑", "痺", "鬼", "塊", "醜", "魂", "魅", "魔", "畏", "刷", "擦", "摩", "磨", "凹", "凸", "奉", "奏", "棒", "捧", "耐", "霊", "需", "濡", "端", "壱", "尼", "泥", "漏", "氾", "某", "謀", "媒", "尉", "慰", "酵", "酢", "釣", "畜", "蓄", "玄", "眩", "喩", "鬱", "舵", "幻", "幽", "幼", "稚", "維", "推", "堆", "椎", "脊", "雛", "誰", "唯", "鳴", "刻", "劾", "核", "骸", "咳", "該", "診", "珍", "瓦", "併", "瓶", "屏", "餅", "餌", "呑", "沃", "妖", "呪", "艶", "慈", "滋", "擁", "腐", "微", "徴", "懲", "殆", "姫", "如", "茹", "婿", "娘", "塚", "豪", "蒙", "懇", "貌", "逐", "遂", "随", "怠", "佐", "弄", "嘲", "弊", "幣", "朋", "棚", "柵", "栓", "詮", "塞", "藤", "騰", "麺", "拉", "厘", "挨", "曖", "瑠", "嫉", "妬", "鹿", "塵", "麗", "慶", "兜", "鼠", "溺", "褐", "葛", "篤", "罠", "烏", "鴨", "鳩", "鷹", "鷲", "桑", "蚕", "蝶", "虹"];

        const JLPTLevel = {
            'JLPT N5': '一右雨円下何火外学間気休金九月見五午後語校行高国今左三山四子時七車十出書女小上食人水生西先千川前大男中長天電土東読南二日入年白八半百父聞母北本毎万名木友来六話',
            'JLPT N4': '悪安以意医員飲院運映英駅屋音夏家歌花画会海界開楽漢館帰起急究牛去魚京強教業近銀空兄計建犬研験元言古公口工広考黒作仕使始姉思止死私紙試事字持自室質写社者借主手秋終習週集住重春少場色心新真親図世正青赤切早走送足族多体待貸代台題知地茶着昼注朝町鳥通弟店転田度冬答動同堂道特肉買売発飯病品不風服物文別勉歩方妹味明目問夜野有夕曜洋用理立旅料力',
            'JLPT N3': '愛暗位偉易違育因引泳越園演煙遠押横王化加科果過解回皆絵害格確覚掛割活寒完官感慣観関顔願危喜寄幾期機規記疑議客吸求球給居許供共恐局曲勤苦具偶靴君係形景経警迎欠決件権険原現限呼互御誤交候光向好幸更構港降号合刻告込困婚差座最妻才歳済際在罪財昨察殺雑参散産賛残市師指支資歯似次治示耳辞式識失実若取守種酒首受収宿術処初所緒助除勝商招消笑乗常情状職信寝深申神進吹数制性成政晴精声静席昔石積責折説雪絶戦洗船選然全祖組想争相窓草増側息束速続存他太打対退宅達単探断段談値恥置遅調頂直追痛定庭程適点伝徒渡登途都努怒倒投盗当等到逃頭働得突内難任認猫熱念能破馬敗杯背配箱髪抜判反犯晩番否彼悲疲費非飛備美必表貧付夫婦富怖浮負舞部福腹払平閉米変返便捕暮報抱放法訪亡忘忙望末満未民眠務夢娘命迷鳴面戻役約薬優由遊予余与容様葉要陽欲頼落利流留両良類例冷礼列連路労老論和',
            'JLPT N2': '圧依囲委移胃衣域印宇羽雲営栄永鋭液延塩汚央奥欧黄億温河荷菓課貨介快改械灰階貝各角革額乾刊巻干患換汗甘管簡缶丸含岸岩希机祈季技喫詰逆久旧巨漁競協叫境挟橋況胸極玉均禁区隅掘訓群軍傾型敬軽芸劇血券県肩賢軒減個固庫戸枯湖雇効厚硬紅耕肯航荒講郊鉱香腰骨根混査砂再採祭細菜材坂咲冊刷札皿算伺刺史枝糸脂詞誌児寺湿捨弱周州拾舟柔祝述準純順署諸召将床承昇焼照省章紹象賞城畳蒸植触伸森臣辛針震勢姓星清税隻籍績跡接設占専泉浅線双層捜掃燥総装像憎臓蔵贈造則測卒孫尊損村帯替袋濯谷担炭短団池築畜竹仲柱虫駐著貯兆庁超沈珍低停底泥滴鉄殿塗党凍塔島湯灯筒導童銅毒届曇鈍軟乳燃悩濃脳農波拝倍泊薄爆麦肌板版般販比皮被鼻匹筆氷秒瓶布府普符膚武封副復幅複沸仏粉兵並片編辺補募包宝豊帽暴棒貿防磨埋枚綿毛門油輸勇郵預幼溶踊浴翌絡乱卵裏陸律略粒了涼療量領緑林輪涙令零齢歴恋練録湾腕',
            'JLPT N1': '亜阿哀葵茜握渥旭梓扱絢綾鮎案杏伊威尉惟慰為異維緯遺井亥郁磯壱逸稲芋允姻胤陰隠韻卯丑渦唄浦叡影瑛衛詠疫益悦謁閲宴援沿炎猿縁艶苑鉛於凹往応旺殴翁沖憶乙卸恩穏仮伽価佳嘉嫁寡暇架禍稼箇茄華霞蚊我芽賀雅餓塊壊怪悔懐戒拐魁凱劾慨概涯街該馨垣嚇拡核殻獲穫較郭閣隔岳潟喝括渇滑褐轄且叶樺株鎌茅刈侃冠勘勧喚堪寛幹憾敢棺款歓環監看緩肝艦莞貫還鑑閑陥巌眼頑企伎器基奇嬉岐忌揮旗既棋棄毅汽稀紀貴軌輝飢騎鬼亀偽儀宜戯擬欺犠義誼菊鞠吉橘却脚虐丘及宮弓救朽泣窮級糾拒拠挙虚距亨享凶匡喬峡恭狂狭矯脅興郷鏡響驚仰凝尭暁桐錦斤欣欽琴筋緊芹菌衿襟謹吟句玖駆駒愚虞遇屈熊栗繰桑勲薫郡袈刑啓圭契径恵慶慧憩掲携桂渓系継茎蛍鶏鯨撃激傑潔穴結倹健兼剣圏堅嫌憲懸拳検献絹謙遣顕厳幻弦源玄絃孤己弧故胡虎誇顧鼓伍呉娯悟梧瑚碁護鯉侯倖功后坑孔宏巧康弘恒抗拘控攻昂晃江洪浩溝甲皇稿紘絞綱衡貢購酵鋼項鴻剛拷豪克穀酷獄墾恨懇昆紺魂佐唆嵯沙瑳詐鎖裟債催哉宰彩栽災采砕斎裁載剤冴崎削搾朔策索錯桜笹撮擦皐傘惨桟燦蚕酸暫司嗣士姿志施旨氏祉紫肢至視詩諮賜雌飼侍慈滋爾磁蒔汐鹿軸執漆疾偲芝舎射赦斜煮紗謝遮蛇邪勺尺爵酌釈寂朱殊狩珠趣儒授樹需囚宗就修愁洲秀臭衆襲酬醜充従汁渋獣縦銃叔淑縮粛塾熟俊峻瞬竣舜駿准循旬殉淳潤盾巡遵暑曙渚庶叙序徐恕傷償匠升唱奨宵尚庄彰抄掌捷昌昭晶松梢沼渉焦症硝礁祥称肖菖蕉衝訟証詔詳鐘障丞冗剰壌嬢条浄穣譲醸錠嘱飾殖織辱侵唇娠審慎振晋榛浸秦紳薪診仁刃尋甚尽迅陣須酢垂帥推炊睡粋翠衰遂酔錘随瑞髄崇嵩枢雛据杉澄寸瀬畝是征整牲盛聖製誠誓請逝斉惜斥析碩拙摂窃節舌仙宣扇栓染潜旋繊薦践遷銭銑鮮善漸禅繕塑措疎礎租粗素訴阻僧創倉喪壮奏爽惣挿操曹巣槽綜聡荘葬蒼藻遭霜騒促即俗属賊汰堕妥惰駄耐怠態泰滞胎逮隊黛鯛第鷹滝卓啄択拓沢琢託濁諾只但辰奪脱巽棚丹嘆旦淡端胆誕鍛壇弾暖檀智痴稚致蓄逐秩窒嫡宙忠抽衷鋳猪丁帳弔張彫徴懲挑暢潮眺聴脹腸蝶跳勅朕賃鎮陳津墜椎塚槻漬蔦椿坪紬釣鶴亭偵貞呈堤帝廷悌抵提禎締艇訂逓邸摘敵笛哲徹撤迭典展添吐斗杜奴刀悼搭桃棟痘糖統藤討謄豆踏透陶騰闘憧洞瞳胴峠匿徳督篤独凸寅酉屯惇敦豚奈那凪捺縄楠尼弐虹如尿妊忍寧粘乃之納巴把覇派婆俳廃排肺輩培媒梅賠陪萩伯博拍舶迫漠縛肇鉢伐罰閥鳩隼伴帆搬班畔繁藩範煩頒盤蛮卑妃扉批披斐泌碑秘緋罷肥避尾微眉柊彦姫媛俵彪標漂票評描苗彬浜賓頻敏扶敷腐芙譜賦赴附侮楓蕗伏覆噴墳憤奮紛雰丙併塀幣弊柄陛壁癖碧偏遍弁保舗甫輔穂墓慕簿倣俸奉峰崩朋泡砲縫胞芳萌褒邦飽鳳鵬乏傍剖妨房某冒紡肪膨謀僕墨撲朴牧睦没堀奔翻凡盆摩魔麻槙幕膜柾亦又抹繭麿慢漫魅巳岬密稔脈妙矛霧椋婿盟銘滅免模茂妄孟猛盲網耗黙紋匁也冶耶弥矢厄訳躍靖柳愉癒諭唯佑宥幽悠憂柚湧猶祐裕誘邑雄融誉庸揚揺擁楊窯羊耀蓉謡遥養抑翼羅裸雷酪嵐欄濫藍蘭覧吏履李梨璃痢離率琉硫隆竜慮虜亮僚凌寮猟瞭稜糧諒遼陵倫厘琳臨隣麟瑠塁累伶励嶺怜玲鈴隷霊麗暦劣烈裂廉蓮錬呂炉露廊朗楼浪漏郎禄倭賄惑枠亘侑勁奎崚彗昴晏晨晟暉栞椰毬洸洵滉漱澪燎燿瑶皓眸笙綺綸翔脩茉莉菫詢諄赳迪頌颯黎凜熙'
        };

        const JLPTColors = {
            'JLPT N5': '#1d99f3',
            'JLPT N4': '#1cdc9a',
            'JLPT N3': '#c9ce3b',
            'JLPT N2': '#f67400',
            'JLPT N1': '#da4453'
        };









        const studied = 82;
        const kanjiStudied = kanji.slice(0, studied);
        const rainContainer = document.getElementById("rain-container");
        const dropRateSlider = document.getElementById("drop-rate-slider");

        const totalKanjiElement = document.getElementById("total-kanji");
        const n5PercentageElement = document.getElementById("n5-percentage");
        const n4PercentageElement = document.getElementById("n4-percentage");
        const n3PercentageElement = document.getElementById("n3-percentage");
        const n2PercentageElement = document.getElementById("n2-percentage");
        const n1PercentageElement = document.getElementById("n1-percentage");
        const nonePercentageElement = document.getElementById("none-percentage");

        let kanjiCount = {
            total: 0,
            n5: 0,
            n4: 0,
            n3: 0,
            n2: 0,
            n1: 0,
            none: 0
        };


        // Matter.js setup
        const { Engine, Render, Runner, Bodies, Composite, Body } = Matter;

        const engine = Engine.create();
        const world = engine.world;

        const render = Render.create({
            element: rainContainer,
            engine: engine,
            options: {
                width: window.innerWidth,
                height: window.innerHeight,
                wireframes: false,
                background: 'transparent'
            }
        });

        Render.run(render);
        Runner.run(Runner.create(), engine);

        // Create initial walls
        let bottomWall, leftWall, rightWall;

        // Function to create walls
        function createWalls() {
            const wallOptions = { isStatic: true, render: { fillStyle: 'transparent' } };

            const wallThickness = 10;
            bottomWall = Bodies.rectangle(window.innerWidth / 2, window.innerHeight, window.innerWidth, wallThickness, wallOptions);
            leftWall = Bodies.rectangle(0, window.innerHeight / 2, wallThickness, window.innerHeight, wallOptions);
            rightWall = Bodies.rectangle(window.innerWidth, window.innerHeight / 2, wallThickness, window.innerHeight, wallOptions);

            Composite.add(world, [bottomWall, leftWall, rightWall]);
        }

        // Function to update wall positions and sizes on window resize
        function updateWalls() {
            // Update bottom wall position and size
            Body.setPosition(bottomWall, { x: window.innerWidth / 2, y: window.innerHeight });
            Body.setVertices(bottomWall, [
                { x: 0, y: window.innerHeight },
                { x: window.innerWidth, y: window.innerHeight },
                { x: window.innerWidth, y: window.innerHeight + 10 },
                { x: 0, y: window.innerHeight + 10 }
            ]);

            // Update left wall position and size
            Body.setPosition(leftWall, { x: 0, y: window.innerHeight / 2 });
            Body.setVertices(leftWall, [
                { x: 0, y: 0 },
                { x: 10, y: 0 },
                { x: 10, y: window.innerHeight },
                { x: 0, y: window.innerHeight }
            ]);

            // Update right wall position and size
            Body.setPosition(rightWall, { x: window.innerWidth, y: window.innerHeight / 2 });
            Body.setVertices(rightWall, [
                { x: window.innerWidth, y: 0 },
                { x: window.innerWidth + 10, y: 0 },
                { x: window.innerWidth + 10, y: window.innerHeight },
                { x: window.innerWidth, y: window.innerHeight }
            ]);
        }

        // Initial wall creation
        createWalls();


        let lastDropTime = 0;
        function updateRaindrops(time) {
            if (time - lastDropTime >= dropRateSlider.value) {
                createOrderedRaindrop();
                lastDropTime = time;
            }
            requestAnimationFrame(updateRaindrops);
        }

        requestAnimationFrame(updateRaindrops);



        function getKanjiColor(kanji) {
            for (const level in JLPTLevel) {
                if (JLPTLevel[level].includes(kanji)) {
                    return JLPTColors[level];
                }
            }
            return '#fafafa'; // Default color if kanji is not found in any level
        }


        function createRandomRaindrop() {
            const kanjiElement = document.createElement("div");
            kanjiElement.classList.add("kanji");
            const kanjiChar = kanjiStudied[Math.floor(Math.random() * kanjiStudied.length)];
            kanjiElement.textContent = kanjiChar;
            kanjiElement.style.color = getKanjiColor(kanjiChar); // Set the color based on JLPT level
            rainContainer.appendChild(kanjiElement);

            const x = Math.random() * (window.innerWidth - 30);
            const y = -50;

            const body = Bodies.circle(x, y, 15, {
                render: { visible: false },
                restitution: 0.3,
                friction: 0.001
            });

            Composite.add(world, body);

            Matter.Events.on(engine, 'afterUpdate', () => {
                kanjiElement.style.left = `${body.position.x - 15}px`;
                kanjiElement.style.top = `${body.position.y - 15}px`;
                kanjiElement.style.transform = `rotate(${body.angle}rad)`;
            });
        }


        let currentIndex = 0;

        function createOrderedRaindrop() {
            if (currentIndex >= kanjiStudied.length) {
                return; // Stop when all kanji are used
            }

            const kanjiElement = document.createElement("div");
            kanjiElement.classList.add("kanji");
            const kanjiChar = kanjiStudied[currentIndex];
            kanjiElement.textContent = kanjiChar;
            kanjiElement.style.color = getKanjiColor(kanjiChar); // Set the color based on JLPT level
            rainContainer.appendChild(kanjiElement);

            const x = Math.random() * (window.innerWidth - 30);
            const y = -50;

            const body = Bodies.circle(x, y, 15, {
                render: { visible: false },
                restitution: 0.3,
                friction: 0.001
            });

            Composite.add(world, body);

            Matter.Events.on(engine, 'afterUpdate', () => {
                kanjiElement.style.left = `${body.position.x - 15}px`;
                kanjiElement.style.top = `${body.position.y - 15}px`;
                kanjiElement.style.transform = `rotate(${body.angle}rad)`;
            });

            updateKanjiCount(kanjiChar);
            currentIndex++; // Move to the next kanji
        }

        function updateStatistics() {
            totalKanjiElement.textContent = kanjiCount.total;
            n5PercentageElement.textContent = kanjiCount.n5 + ' - ' + ((kanjiCount.n5 / kanjiCount.total) * 100).toFixed(2) + '%';
            n4PercentageElement.textContent = kanjiCount.n4 + ' - ' + ((kanjiCount.n4 / kanjiCount.total) * 100).toFixed(2) + '%';
            n3PercentageElement.textContent = kanjiCount.n3 + ' - ' + ((kanjiCount.n3 / kanjiCount.total) * 100).toFixed(2) + '%';
            n2PercentageElement.textContent = kanjiCount.n2 + ' - ' + ((kanjiCount.n2 / kanjiCount.total) * 100).toFixed(2) + '%';
            n1PercentageElement.textContent = kanjiCount.n1 + ' - ' + ((kanjiCount.n1 / kanjiCount.total) * 100).toFixed(2) + '%';
            nonePercentageElement.textContent = kanjiCount.none + ' - ' + ((kanjiCount.none / kanjiCount.total) * 100).toFixed(2) + '%';
        }

        function updateKanjiCount(kanji) {
            kanjiCount.total++;
            if (JLPTLevel['JLPT N5'].includes(kanji)) {
                kanjiCount.n5++;
            } else if (JLPTLevel['JLPT N4'].includes(kanji)) {
                kanjiCount.n4++;
            } else if (JLPTLevel['JLPT N3'].includes(kanji)) {
                kanjiCount.n3++;
            } else if (JLPTLevel['JLPT N2'].includes(kanji)) {
                kanjiCount.n2++;
            } else if (JLPTLevel['JLPT N1'].includes(kanji)) {
                kanjiCount.n1++;
            } else {
                kanjiCount.none++;
            }
            updateStatistics();
        }



        // Resize handler
        window.addEventListener('resize', () => {
            // Adjust the canvas size
            render.canvas.width = window.innerWidth;
            render.canvas.height = window.innerHeight;
            Render.setPixelRatio(render, window.devicePixelRatio);

            // Update the wall sizes and positions
            updateWalls();
        });
    </script>
</body>

</html>